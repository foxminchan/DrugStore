@page "/categories/add"

<PageTitle>Add Category</PageTitle>

<RadzenBreadCrumb>
    <RadzenBreadCrumbItem Path="/" Text="Home"/>
    <RadzenBreadCrumbItem Path="/categories" Text="Categories"/>
    <RadzenBreadCrumbItem Text="Add"/>
</RadzenBreadCrumb>

<RadzenText TextStyle="TextStyle.H3">Categories</RadzenText>

@if (_errors.Any())
{
    <ErrorStack ErrorMessages="@_errors"></ErrorStack>
}

<RadzenTemplateForm TItem="CategoryCreateRequest" Data="@_category" Submit="@OnSubmit">
    <RadzenFieldset Text="Category information">
        <RadzenStack Gap="1rem">
            <RadzenLabel Text="Name" Component="Name"/>
            <RadzenTextBox Style="display: block"
                           Name="Name"
                           ReadOnly="_busy"
                           @bind-Value="@_category.Name"
                           class="w-100"
                           Placeholder="Enter category name"/>
            <RadzenCustomValidator Component="Name"
                                   Text="Name is required and has 50 characters maximum"
                                   Validator="@(() => ValidateCategoryName(_category.Name))"/>
            <RadzenLabel Text="Description" Component="Description"/>
            <RadzenTextArea Style="display: block"
                            Name="Description"
                            ReadOnly="_busy"
                            @bind-Value="@_category.Description"
                            class="w-100"
                            Placeholder="Enter category description"/>
            <RadzenCustomValidator Component="Description"
                                   Text="Description has 100 characters maximum"
                                   Validator="@(() => ValidateCategoryDescription(_category.Description))"/>
        </RadzenStack>
    </RadzenFieldset>
    <RadzenStack Style="margin-top:1rem;" 
                 Orientation="Orientation.Horizontal" 
                 AlignItems="AlignItems.Center" 
                 JustifyContent="JustifyContent.End" 
                 Gap="0.5rem">
        <RadzenButton ButtonStyle="ButtonStyle.Primary"
                      ButtonType="ButtonType.Submit"
                      Icon="save"
                      Text="Save"
                      Variant="Variant.Flat"
                      IsBusy="@_busy"/>
        <RadzenButton ButtonStyle="ButtonStyle.Light"
                      Text="Cancel"
                      Variant="Variant.Flat"
                      IsBusy="@_busy"
                      Click="@CancelButtonClick"/>
    </RadzenStack>
</RadzenTemplateForm>